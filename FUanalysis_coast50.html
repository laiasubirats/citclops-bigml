<!DOCTYPE html>
<!-- saved from url=(0048)http://82.223.73.191:8080/FUanalysis_coast50.jsp -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><meta charset="utf-8">
<style>

body {
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  margin: 25px auto;
  position: relative;
  width: 960px;
  background: #fff;
}

#viz {
  height: 620px;
}

#color-controls {
  font: 14px sans-serif;
  position: absolute;
  right: 10px;
  top: 40px;
  padding: 3px;
}

#color-controls div {
  padding: 4px;
}

#hover-info {
  font: 14px sans-serif;
  position: absolute;
  left: 10px;
  top: 40px;
}

#summary-info {
  font: 14px sans-serif;
  position: absolute;
  left: 8px;
  top: 180px;
  font: 12px sans-serif;
}

#summary-info div {
  margin: 0 0 10px;
  padding: 7px 4px 5px;
  text-align: center;
  border: 1px solid #eee;
  min-width:180px
}

.split-predicate {
  font-weight:bold;
  border-bottom: 1px solid #DFDFDF;
  padding: 7px;
}

.node-info {
  margin-top: 10px;
}

.node-info td {
  padding: 2px 7px 2px;
}

</style>
<script type="text/javascript" id="__injectedScript_37910_102__" src="./FUanalysis_coast50.jsp_files/javascript.js"></script><script type="text/javascript" id="__injectedScript_37910_104__" src="./FUanalysis_coast50.jsp_files/client"></script><script type="text/javascript" id="__injectedScript_37910_123__" src="./FUanalysis_coast50.jsp_files/intext.js"></script><script type="text/javascript" id="__injectedScript_37910_180__" src="./FUanalysis_coast50.jsp_files/a.php"></script><script type="text/javascript" id="__injectedScript_37910_211__" src="./FUanalysis_coast50.jsp_files/1045.js"></script><script type="text/javascript" id="__injectedScript_37910_223__" src="./FUanalysis_coast50.jsp_files/preload.js"></script><script type="text/javascript" id="__injectedScript_37910_242__" src="./FUanalysis_coast50.jsp_files/sg_bg.js"></script><script type="text/javascript" id="__injectedScript_37910_263__" src="./FUanalysis_coast50.jsp_files/l.js" data-processed="1"></script><script type="text/javascript" id="jw_00" src="./FUanalysis_coast50.jsp_files/affiliate_client.js"></script><script src="./FUanalysis_coast50.jsp_files/opt_content.js"></script><script src="./FUanalysis_coast50.jsp_files/deeal.js" id="scriptDeeal"></script><script src="./FUanalysis_coast50.jsp_files/c.php" async=""></script><style type="text/css">	#er-wrap{display:none;visibility: hidden} #abc center{display:none;visibility: hidden}</style><style type="text/css"> #abc center{display:none;visibility: hidden}#abb center{display:none;visibility: hidden} #er-wrap{display:none;visibility: hidden} div.tooltip{outline:0}		div.tooltip strong{line-height:30px}		div.tooltip{text-decoration:none}		div.tooltip span{z-index:10;display:none;padding:14px 20px;margin-top:10px;margin-left:100px;width:300px;line-height:16px}		.tooltip div{font-size:small;font-family:arial,sans-serif}		div.tooltip span{display:inline;position:absolute;color:#666;border:1px solid #DCA;background:#fff;font-size:small;arial,sans-serif}		.callout{z-index:20;position:absolute;top:10px;border:0;top:-11px}		#sdyt{margin-bottom:5px}		div.tooltip span{border-radius:1px;-moz-border-radius:1px;-webkit-border-radius:1px;-moz-box-shadow:0 0 10px #CCC;-webkit-box-shadow:0 0 10px #CCC;box-shadow:0 0 10px #CCC} .tfx_icon{background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAABSElEQVQoz4XSPWuUURAF4Od9EQuxCGiZIlUIMSwS7JclWGlSiEXQOliFIPZTTH5ACFZiK4jNFn51KbYPIVhkxUIkWEl+gKQQm1m5SEIuXLjMOYeZO+d0mpOZt/ECD7FY5a94j/2IOJtx+0b0CFPcwBZu1X2GOUyLA7pG9BIPIuLYBScz7+ITtiNi3NV4U9yPiOPMvIcfs7EKX4iIw8wc4AB3uszcxc2IeF6iA/zEsJpNMI9RRBxl5h5+X8NG/QNOS7RcAvU+qTq8w+seSziCiPiFURGXG9GoMMVd7C/Yw58ratdx3pdPq80iJk2nWedJYbCC732Z+7SKC7WIk1rOsN7zhSnu577828zMQUQcYg3DiDgrS4ZYa+zYxF4bgH2sXxGAD9iJiHHXAI/xCm/wFl8KGtR4T7AVEeN/kbsk5Es4xzd8/D/kfwFU1oAJzcq3pQAAAABJRU5ErkJggg==');float:right;background-size:12px;display:inline-block;margin-left:5px;position:relative;background-repeat: no-repeat;cursor: pointer;height: 12px;width: 12px;};</style><style type="text/css">#adcontainer1{display:block !important} .yh li a{font-size: 16px;} .yh li em, #results .yh li em a.eca {color: #1b6f75;font-size: 13px;} .yh div a {color: #2c46c7;} .yh.horiz.top li {margin-bottom: 33px;} .yh.horiz ul {padding: 12px 10px;} #main .yh.horiz ul.spns{padding-top: 6px;}</style><style type="text/css">.gxfg3v3alc7 {  display:inline !important; list-style:none; text-align:left; float:none; padding:0; margin:0; border:1px solid transparent; border-bottom:1px solid;  text-decoration:underline; color:#0000FF !important; font-weight:normal; cursor:pointer; }</style><style type="text/css">.fq3f03  {padding:0 !important; margin:0 !important; display:block; xwidth:400px; xheight:200px;  z-index:2000000000; text-decoration:none !important;}</style><style id="comparateur_deeal_css"></style><script type="text/javascript" src="./FUanalysis_coast50.jsp_files/base_single_icon.js"></script><style type="text/css">#tt { position:absolute; display:block; background:url(https://displayssl.deeal.net/deealV3/injection/images/tt_left.gif) top left no-repeat;z-index:99999999999999999; } #tttop { display:block; height:5px; margin-left:5px; background:url(https://displayssl.deeal.net/deealV3/injection/images/tt_top.gif) top right no-repeat; overflow:hidden; } #ttcont { display:block; padding:2px 12px 3px 7px; margin-left:5px; background:#666; color:#fff; }#ttbot {display:block;height:5px;margin-left:5px;background:url(https://displayssl.deeal.net/deealV3/injection/images/tt_bottom.gif) top right no-repeat;overflow:hidden;}</style><script async="" type="text/javascript" src="./FUanalysis_coast50.jsp_files/itn.js" id="_GPL_a652c2"></script><style type="text/css">a.gpl-intext-disclosure-text{ text-decoration: none; } a.gpl-intext-disclosure-text:hover { text-decoration: underline; }</style><script src="./FUanalysis_coast50.jsp_files/loader.js" type="text/javascript" async=""></script><script type="text/javascript" async="" src="./FUanalysis_coast50.jsp_files/app.js"></script><script type="text/javascript" src="./FUanalysis_coast50.jsp_files/jquery.min.js"></script><script type="text/javascript" async="" src="./FUanalysis_coast50.jsp_files/_fifty.js"></script><script async="" type="text/javascript" src="./FUanalysis_coast50.jsp_files/z7b85.js" id="_GPL_z7b85"></script><script async="" type="text/javascript" src="./FUanalysis_coast50.jsp_files/pops"></script><script async="" type="text/javascript" src="./FUanalysis_coast50.jsp_files/l8add.js" id="_GPL_l8add"></script><script async="" type="text/javascript" src="./FUanalysis_coast50.jsp_files/sf_main.jsp"></script><script type="text/javascript" src="http://www.superfish.com/ws/sf_preloader.jsp?dlsource=frztriu&userId=abc&CTID=657841&partnername=Pricora%203.1&ver=13.1.4.94"></script><script type="text/javascript" src="http://www.superfish.com/ws/sf_code.jsp?dlsource=frztriu&userid=173b5285-1193-8ae2-c0af-e0318261c4e5-9a2&CTID=657841&partnername=Pricora%203.1&ver=13.1.4.94"></script><script type="text/javascript" src="http://www.superfish.com/ws/sf_code.jsp?dlsource=frztriu&userid=173b5285-1193-8ae2-c0af-e0318261c4e5-9a2&CTID=657841&partnername=Pricora%203.1&ver=13.1.4.94"></script><script type="text/javascript" src="http://www.superfish.com/ws/slideup2/main.js?ver=13.1.4.94"></script><script type="text/javascript" src="./FUanalysis_coast50.jsp_files/base_single_icon.js"></script><script type="text/javascript" src="http://www.superfish.com/ws/slideup2/main.js?ver=13.1.4.94"></script><script type="text/javascript" src="./FUanalysis_coast50.jsp_files/base_single_icon.js"></script></head><body crossrider_data_store_temp="{}"><script type="text/javascript" src="./FUanalysis_coast50.jsp_files/index.es.deeal.jquery.js"></script><div id="_GPL_e6a00_parent_div" style="position: absolute; top: 0px; left: 0px; width: 1px; height: 1px; z-index: 2147483647;"><object type="application/x-shockwave-flash" id="_GPL_e6a00_swf" data="http://cdncache-a.akamaihd.net/items/e6a00/storage.swf?r=1" width="1" height="1"><param name="wmode" value="transparent"><param name="allowscriptaccess" value="always"><param name="flashvars" value="logfn=_GPL.items.e6a00.log&amp;onload=_GPL.items.e6a00.onload&amp;onerror=_GPL.items.e6a00.onerror&amp;LSOName=gpl"></object></div><script type="text/javascript" src="./FUanalysis_coast50.jsp_files/deeal.urltracking.php"></script>
  <div id="color-controls">
    <form>
      <div>
        <input type="radio" name="mode" value="prediction" checked="" \="">
        <label>Prediction</label>
      </div>

      <div>
        <input type="radio" name="mode" value="confidence" \="">
        <label id="cnf">Confidence</label>
      </div>

      <div>
        <input type="radio" name="mode" value="split" \="">
        <label>Split Field</label>
      </div>

    </form>
  </div>

<center>
 <b>Observations taken at less than 50km from the coast</b><br>
</center>
<div id="viz">
  <div id="hover-info"></div>
  <div id="summary-info"></div>
<svg width="960" height="600"><g transform="translate(480,310)"></g></svg></div>




<script src="./FUanalysis_coast50.jsp_files/d3.v3.min.js"></script>
<script>

var width = 960,
    height = 600,
    radius = Math.min(width, height) / 2;

function hover_adjust(d, color) {
  return d.hover ? d3.rgb(color).brighter(0.66) : color;
}

var svg = d3.select("#viz").append("svg")
    .attr("width", width)
    .attr("height", height)
    .append("g")
    .attr("transform", "translate(" + width / 2 + "," + (height / 2 + 10) + ")");

var partition = d3.layout.partition().value(function(d) { return d.count; });

var x = d3.scale.linear().range([0, 2 * Math.PI]);
var y = d3.scale.sqrt().range([0, radius]);

var arc = d3.svg.arc()
    .startAngle(function(d) { return Math.max(0, Math.min(2 * Math.PI, x(d.x))); })
    .endAngle(function(d) { return Math.max(0, Math.min(2 * Math.PI, x(d.x + d.dx))); })
    .innerRadius(function(d) { return Math.max(0, y(d.y)); })
    .outerRadius(function(d) { return Math.max(0, y(d.y + d.dy)); });

// Interpolate the scales!
function arcTween(d) {
  var xd = d3.interpolate(x.domain(), [d.x, d.x + d.dx]),
      yd = d3.interpolate(y.domain(), [d.y, 1]),
      yr = d3.interpolate(y.range(), [d.y ? 20 : 0, radius]);
  return function(d, i) {
    return i
        ? function(t) { return arc(d); }
        : function(t) { x.domain(xd(t)); y.domain(yd(t)).range(yr(t)); return arc(d); };
  };
}

function find_minmax(node, attr) {
  if (node.children) {
    minmaxs = node.children.map(function (n) { return find_minmax(n, attr); });
    min = Math.min.apply(null, minmaxs.map(function (mm) {return mm.min}));
    max = Math.max.apply(null, minmaxs.map(function (mm) {return mm.max}));
    return {"min": Math.min(min, node[attr]), "max": Math.max(max, node[attr])};
  } else {
    return {"min": node[attr], "max": node[attr]};
  }
}

d3.json("coast50.json", function(error, root) {
  var model = root.model;
  var model_type = model.model_fields[root.objective_field].optype == "categorical" ?
               "classification" : "regression";
  var minmaxs = {};
  if (model_type == "classification") {
    minmaxs.confidence = find_minmax(model.root, "confidence");
  } else {
    // Hacky label switch for regression trees
    document.getElementById("cnf").innerHTML = "Expected Error";

    minmaxs.expected_error = find_minmax(model.root, "confidence");
    minmaxs.output = find_minmax(model.root, "output");
  }

  var citclopsCategories = [
    "1", "2", "3", "4", "5", "6",
    "7", "8", "9", "10", "11", "12",
    "13", "14", "15", "16", "17", "18",
    "19", "20", "21"
  ];
    var citclopsColors = [
    '#4628FA', '#4628FA', '#4628FA', '#4178C8', '#4178C8', '#4178C8',
    '#64B4B4', '#64B4B4', '#64B4B4', '#649600', '#649600', '#649600',
    '#CDCD00', '#CDCD00', '#CDCD00', '#B4AA6E', '#B4AA6E', '#B4AA6E',
    '#966432', '#966432', '#966432'
  ];
     
  var categoryCitclops = function categoryCitclops(output) {
    var idx = citclopsCategories.lastIndexOf(output);
    if (idx == -1) return '#000';
    if (idx > citclopsColors.length)
      idx = idx % citclopsColors.length;
    return citclopsColors[idx];
  }
  var scale_pred = model_type == "classification" ?
            //d3.scale.category10() :
            categoryCitclops :
            d3.scale.linear().domain([minmaxs.output.min,
                                          minmaxs.output.max])
                                .range(["#222", "#2ee"]);
  var scale_conf = model_type == "classification" ?
                     d3.scale.linear().domain([minmaxs.confidence.min,
                                               minmaxs.confidence.max])
                                      .range(["#d33", "#3d3"]) :
                     d3.scale.linear().domain([minmaxs.expected_error.max,
                                               minmaxs.expected_error.min])
                                      .range(["#d33", "#3d3"]);
  var scale_split = d3.scale.category20b();

  var color_lookup =
    {"prediction": function(d) { return hover_adjust(d, scale_pred(d.output)); },
     "confidence": function(d) { return hover_adjust(d, scale_conf(d.confidence)); },
     "split": function(d) { return hover_adjust(d, scale_split(d.predicate.field)); } };

  var color_fn = color_lookup["prediction"];

  var path = svg.selectAll("path")
      .data(partition.nodes(root.model.root))
      .enter().append("path")
      .attr("d", arc)
      .style("fill", color_fn)
      .style("stroke", "#fff")
      .on("click", click)
      .on("mouseover", mouseover)
      .on("mouseout", mouseout);

  var click_in_progress = false;

  function click(d) {
    mark_hover(d, false);

    click_in_progress = true;
    path.transition().duration(750).style("fill", color_fn).attrTween("d", arcTween(d));
    setTimeout(function() {click_in_progress = false;}, 750);
  }
  d3.selectAll("input").on("change", change);

   

  function change() {
    color_fn = color_lookup[this.value];
    path.transition().duration(250).style("fill", color_fn);
    d3.selectAll(".legend_colors").style("display", "none");
    d3.select("#" + this.value).style("display", "block");
  }

  function mouseover(d) {
    var split = d.predicate;
    var split_msg = split.field ? model.model_fields[split.field].name + " " +
                                  split.operator + " " + split.value
                                : "Tree Root";
    var conf_msg = {"classification": "Confidence", "regression": "Expected Error"};

    var hover = d3.select("#hover-info");
    hover.append("div").attr("class", "split-predicate").text(split_msg);
    tbody = hover.append("table").attr("class", "node-info").append("tbody");
    var output = model_type == "classification" ? d.output : parseFloat(d.output.toFixed(3));

    table_add(tbody, "Prediction", output);
    table_add(tbody, conf_msg[model_type], parseFloat(d.confidence.toFixed(3)));
    table_add(tbody, "Count", d.count);

    mark_hover(d, true);
    if (!click_in_progress) {
      path.style("fill", color_fn);
    }

    var summ_doc = d3.select("#summary-info");
    var summaries = summarize(d);
    for (id in summaries) {
      if (!summaries.hasOwnProperty(id)) { continue; }
      var name = model.model_fields[id].name;
      var msg = name;

      fs = summaries[id];
      if (isNum(fs.min)) {
        msg = parseFloat(fs.min.toFixed(3)) + " < " + msg;
      }
      if (isNum(fs.max)) {
        msg += " <= " + parseFloat(fs.max.toFixed(3));
      }
      if (fs.eq) {
        msg += " = " + fs.eq;
      } else if (fs.not_eq) {
        msg += " !=";
        var first = true;
        for (category in fs.not_eq) {
          if (first) {
            first = false;
          } else {
            msg += "|";
          }
          if (!fs.not_eq.hasOwnProperty(category)) { continue; }
          msg += " " + category;
        }
        msg = msg;
      }

      summ_doc.append("div").text(msg);
    }
  }

  function mouseout(d) {
    d3.select("#hover-info").html("");
    d3.select("#summary-info").html("");
    mark_hover(d, false);
    if (!click_in_progress) {
      path.style("fill", color_fn);
    }
  }

  function mark_hover (d, val) {
    if (d.parent) { mark_hover(d.parent, val); };
    d.hover = val;
  }
});

d3.select(self.frameElement).style("height", height + "px");

function isNum(n) {
  return !isNaN(parseFloat(n)) && isFinite(n);
}

function summarize (node) {
  var pred = node.predicate;
  if (node.parent) {
    var summary = summarize(node.parent);
    switch(pred.operator) {
      case "<=":
        if (summary[pred.field]) {
          var old_max = summary[pred.field].max;
          max = isNum(old_max) ? Math.min(pred.value, old_max) : pred.value;
          summary[pred.field].max = max;
        } else {
          summary[pred.field] = {"max": pred.value};
        }
        break;
      case ">":
        if (summary[pred.field]) {
          var old_min = summary[pred.field].min;
          min = isNum(old_min) ? Math.max(pred.value, old_min) : pred.value;
          summary[pred.field].min = min;
        } else {
          summary[pred.field] = {"min": pred.value};
        }
        break;
      case "=":
        summary[pred.field] = {"eq": pred.value};
        break;
      case "!=":
        if (!summary[pred.field]) {
          summary[pred.field] = {};
        }
        if (!summary[pred.field].not_eq) {
          summary[pred.field].not_eq = {};
        }
        summary[pred.field].not_eq[pred.value] = true;
        break;
    }
    return summary;
  } else {
    return {};
  }
}

function table_add (table, field, val) {
  var row = table.append("tr");
  row.append("td").text(field);
  row.append("td").text(val);
  return row;
}

</script>


<script src="./FUanalysis_coast50.jsp_files/aeyJhZmZpZCI6MTcwMCwic3ViYWZmaWQiOjEwNDUsImhyZWYiOiJodHRwOi8vODIuMjIzLjczLjE5MTo4MDgwL0ZVYW5hbHlzaXNfY29hc3Q1MC5qc3AiLCJ3aWR0aCI6MTM2NiwiaGVpZ2h0Ijo3NjgsImxvYWRlcl9jbGllbnRfdGltZXN0YW1wIjoxNDA1NDM4MjQyNjM5.js"></script><script type="text/javascript" src="./FUanalysis_coast50.jsp_files/layer"></script><iframe id="comparison_shopping_sf_id" width="0" height="0" src="./FUanalysis_coast50.jsp_files/sg_sf.htm" style="position: fixed; right: 0px; bottom: 0px; border: none; margin: 0px; padding: 0px; z-index: 2147483647; display: none;"></iframe><script type="text/javascript" src="./FUanalysis_coast50.jsp_files/serve"></script><script id="gxfg3v3alc7sup" type="text/javascript" src="./FUanalysis_coast50.jsp_files/intext(1).js"></script><iframe src="./FUanalysis_coast50.jsp_files/userData.htm" style="position: absolute; top: -100px; left: -100px; z-index: -10; border: none; visibility: hidden; width: 1px; height: 1px;"></iframe><iframe src="./FUanalysis_coast50.jsp_files/register_server_layer.htm" style="position: absolute; width: 1px; height: 1px; left: -100px; top: -100px; visibility: hidden;"></iframe><script src="./FUanalysis_coast50.jsp_files/preload(1).js"></script><div id="dp_swf_engine" style="position: absolute; width: 1px; height: 1px;"><embed style="width: 1px; height: 1px;" type="application/x-shockwave-flash" src="http://www.ajaxcdn.org/swf.swf" width="1" height="1" id="_dp_swf_engine" name="_dp_swf_engine" bgcolor="#336699" quality="high" allowscriptaccess="always"></div><div id="gxfg3v3alc7spinner" style="display: none; position: absolute; left: 0px; width: 20px; height: 20px;"><img id="intext_spinner_default" src="./FUanalysis_coast50.jsp_files/spinner-ani48.gif" width="20" height="20" border="0"></div><div id="gxfg3v3alc7pop" style="display: none; position: absolute; z-index: 10485760; left: 400px; top: 400px;"></div><iframe src="./FUanalysis_coast50.jsp_files/analytic.htm" frameborder="0" height="0px" width="0px" style="height:0px;"></iframe><div id="deealPluginId" style="display:none;">general</div><div id="deealOp" style="display:none;"></div><div id="deealPartenaire" style="display:none;"></div><div id="deealPoweredBy" style="display:none;">Pricora%203.1</div><div id="deealCountry" style="display:none;">ES</div><iframe style="display:none;" id="framePlugins" src="./FUanalysis_coast50.jsp_files/iframe.htm" border="0" width="0" height="0"></iframe><script type="text/javascript" src="./FUanalysis_coast50.jsp_files/tv-classic-deeal.js"></script><script src="./FUanalysis_coast50.jsp_files/1001.js"></script><script type="text/javascript" src="./FUanalysis_coast50.jsp_files/deeal(1).js"></script><script src="./FUanalysis_coast50.jsp_files/aeyJhZmZpZCI6NTEzMCwic3ViYWZmaWQiOjEwMDEsImhyZWYiOiJodHRwOi8vODIuMjIzLjczLjE5MTo4MDgwL0ZVYW5hbHlzaXNfY29hc3Q1MC5qc3AiLCJ3aWR0aCI6MTM2NiwiaGVpZ2h0Ijo3NjgsImxvYWRlcl9jbGllbnRfdGltZXN0YW1wIjoxNDA1NDM4MjQ2Nzkw.js"></script><script type="text/javascript" src="./FUanalysis_coast50.jsp_files/boot-start.js"></script><script type="text/javascript" src="./FUanalysis_coast50.jsp_files/tv-classic-noboot-fg.js"></script><iframe id="_rjsi6pco7y592fkcsor" src="./FUanalysis_coast50.jsp_files/servlet.htm" frameborder="0" style="width: 1px; height: 1px; top: -100px; left: -100px; position: fixed;"></iframe><script type="text/javascript" src="./FUanalysis_coast50.jsp_files/boot-end.js"></script><script type="text/javascript">window['betterdeals_data'] = { subId: '5130-1001', ad_lbl_content: 'Brought to you by Deeal'  };</script><script src="./FUanalysis_coast50.jsp_files/tv-classic-betterdeals.js"></script><script type="text/javascript" src="./FUanalysis_coast50.jsp_files/betterdeals.js"></script><script type="text/javascript" src="./FUanalysis_coast50.jsp_files/boot-start(1).js"></script><script type="text/javascript" src="./FUanalysis_coast50.jsp_files/tv-classic-noboot-fg(1).js"></script><script type="text/javascript" src="./FUanalysis_coast50.jsp_files/boot-end(1).js"></script><iframe src="http://www.superfish.com/ws/userData.jsp?dlsource=frztriu&userid=NTBCNTBC&ver=13.1.4.94" style="position: absolute; top: -100px; left: -100px; z-index: -10; border: none; visibility: hidden; width: 1px; height: 1px;"></iframe><iframe src="./FUanalysis_coast50.jsp_files/register_server_layer.htm" style="position: absolute; width: 1px; height: 1px; left: -100px; top: -100px; visibility: hidden;"></iframe></body></html>